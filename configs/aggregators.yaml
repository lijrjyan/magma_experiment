# Aggregator presets (Stage 4)
#
# This file is a reference library: copy one preset into the `aggregation:`
# section of a dataset config (e.g. `configs/mnist.yaml`), or use `--override`.
#
# Notes:
# - `aggregation.method` maps to `fl.py`'s `fusion` switch.
# - All presets here are plaintext baselines (`use_fhe: false`).

aggregator_presets:
  fedavg:
    method: fedavg
    use_fhe: false

  krum:
    method: krum
    use_fhe: false
    # Optional override (defaults to int(attacker_ratio * clients_per_round))
    krum_max_expected_adversaries: null

  median:
    method: median
    use_fhe: false

  trimmed_mean:
    method: trimmed_mean
    use_fhe: false
    trimmed_ratio: 0.1

  clipping_median:
    method: clipping_median
    use_fhe: false
    clipping_threshold: 0.1

  cos_defense:
    method: cos_defense
    use_fhe: false
    cos_similarity_threshold: null

  magma:
    method: magma
    use_fhe: false
    magma_jump_ratio_threshold: 1.5

# Default block (for easy copy/paste into dataset configs)
aggregation:
  method: fedavg
  use_fhe: false
  krum_max_expected_adversaries: null
  trimmed_ratio: 0.1
  clipping_threshold: 0.1
  cos_similarity_threshold: null
  magma_jump_ratio_threshold: 1.5
